{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mega-PC\\\\Desktop\\\\my-project\\\\frontend\\\\src\\\\components\\\\authentication.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport api from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction authentication() {\n  _s();\n\n  const [appState, setAppState] = useState({\n    display: \"hide\",\n    isLoggedIn: false,\n    user: null,\n    loading: false\n  });\n  const [formState, setFormState] = useState({\n    username: \"\",\n    password: \"\",\n    display: \"show\"\n  });\n  useEffect(() => {\n    (async () => {\n      setAppState({ ...appState,\n        loading: true\n      });\n      let accessToken = localStorage.getItem(\"accessToken\");\n\n      if (accessToken) {\n        try {\n          const res = await api.getProtected();\n          console.log(res.data);\n          setAppState({ ...appState,\n            display: \"show\",\n            isLoggedIn: true,\n            user: res.data.user,\n            loading: false\n          });\n          setFormState({ ...formState,\n            display: \"hide\"\n          });\n        } catch (error) {\n          console.error(error);\n          alert(error.response.data.error);\n          setAppState({ ...appState,\n            loading: false\n          });\n        }\n      }\n    })();\n  }, []);\n\n  const handleChange = e => {\n    setFormState({ ...formState,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      let res;\n      setAppState({ ...appState,\n        loading: true\n      });\n      const {\n        username,\n        password\n      } = formState;\n\n      switch (e.target.name) {\n        case \"Login\":\n          res = await api.login({\n            username,\n            password\n          });\n          break;\n\n        case \"Signup\":\n          res = await api.signup({\n            username,\n            password\n          });\n          break;\n      }\n\n      let {\n        accessToken,\n        refreshToken\n      } = res.data;\n      localStorage.setItem(\"accessToken\", accessToken);\n      localStorage.setItem(\"refreshToken\", refreshToken);\n      window.location.reload();\n    } catch (error) {\n      console.error(error);\n      setAppState({ ...appState,\n        loading: false\n      });\n      alert(error.response.data.error);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      setAppState({ ...appState,\n        loading: true\n      });\n      let refreshToken = localStorage.getItem(\"refreshToken\");\n      localStorage.removeItem(\"accessToken\");\n      localStorage.removeItem(\"refreshToken\");\n      await api.logout(refreshToken);\n      window.location.reload();\n    } catch (error) {\n      console.error(error);\n      setAppState({ ...appState,\n        loading: false\n      });\n      alert(error.response.data.error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${formState.display} form-container`,\n      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n        className: \"caption\",\n        children: \"Login/Signup form:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"login-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Username :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: formState.username,\n          onChange: e => handleChange(e),\n          placeholder: \"Enter your user name\",\n          className: \"form-field\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-label\",\n          children: \"Password :\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: formState.password,\n          onChange: e => handleChange(e),\n          placeholder: \"Enter your password\",\n          className: \"form-field\",\n          autoComplete: \"off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"form-btn\",\n          name: \"Login\",\n          onClick: e => handleSubmit(e),\n          children: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"form-btn\",\n          name: \"Signup\",\n          onClick: e => handleSubmit(e),\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), !appState.loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${appState.display} user-info`,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Logged in user:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: appState.isLoggedIn && appState.user.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Log Out\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n\n_s(authentication, \"VM260vofKo/kCf2LAqUni3miFag=\");\n\n;\nexport default authentication;","map":{"version":3,"sources":["C:/Users/Mega-PC/Desktop/my-project/frontend/src/components/authentication.js"],"names":["React","useState","useEffect","api","authentication","appState","setAppState","display","isLoggedIn","user","loading","formState","setFormState","username","password","accessToken","localStorage","getItem","res","getProtected","console","log","data","error","alert","response","handleChange","e","target","name","value","handleSubmit","preventDefault","login","signup","refreshToken","setItem","window","location","reload","handleLogout","removeItem","logout"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport api from \"./api\";\r\n\r\nfunction authentication() {\r\n  const [appState, setAppState] = useState({\r\n    display: \"hide\",\r\n    isLoggedIn: false,\r\n    user: null,\r\n    loading: false,\r\n  });\r\n  const [formState, setFormState] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n    display: \"show\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      setAppState({ ...appState, loading: true });\r\n      let accessToken = localStorage.getItem(\"accessToken\");\r\n      if (accessToken) {\r\n        try {\r\n          const res = await api.getProtected();\r\n          console.log(res.data);\r\n          setAppState({\r\n            ...appState,\r\n            display: \"show\",\r\n            isLoggedIn: true,\r\n            user: res.data.user,\r\n            loading: false,\r\n          });\r\n          setFormState({ ...formState, display: \"hide\" });\r\n        } catch (error) {\r\n          console.error(error);\r\n          alert(error.response.data.error);\r\n          setAppState({ ...appState, loading: false });\r\n        }\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormState({ ...formState, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      let res;\r\n      setAppState({ ...appState, loading: true });\r\n      const { username, password } = formState;\r\n      switch (e.target.name) {\r\n        case \"Login\":\r\n          res = await api.login({ username, password });\r\n          break;\r\n        case \"Signup\":\r\n          res = await api.signup({ username, password });\r\n          break;\r\n      }\r\n      let { accessToken, refreshToken } = res.data;\r\n      localStorage.setItem(\"accessToken\", accessToken);\r\n      localStorage.setItem(\"refreshToken\", refreshToken);\r\n\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setAppState({ ...appState, loading: false });\r\n      alert(error.response.data.error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      setAppState({ ...appState, loading: true });\r\n      let refreshToken = localStorage.getItem(\"refreshToken\");\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"refreshToken\");\r\n      await api.logout(refreshToken);\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.error(error);\r\n      setAppState({ ...appState, loading: false });\r\n      alert(error.response.data.error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <div className={`${formState.display} form-container`}>\r\n        <legend className=\"caption\">Login/Signup form:</legend>\r\n        <form className=\"login-form\">\r\n          <label className=\"form-label\">Username :</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"username\"\r\n            value={formState.username}\r\n            onChange={(e) => handleChange(e)}\r\n            placeholder=\"Enter your user name\"\r\n            className=\"form-field\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <br />\r\n          <br />\r\n          <label className=\"form-label\">Password :</label>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={formState.password}\r\n            onChange={(e) => handleChange(e)}\r\n            placeholder=\"Enter your password\"\r\n            className=\"form-field\"\r\n            autoComplete=\"off\"\r\n          />\r\n          <br />\r\n          <br />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"form-btn\"\r\n            name=\"Login\"\r\n            onClick={(e) => handleSubmit(e)}\r\n          >\r\n            Log In\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"form-btn\"\r\n            name=\"Signup\"\r\n            onClick={(e) => handleSubmit(e)}\r\n          >\r\n            Sign Up\r\n          </button>\r\n        </form>\r\n      </div>\r\n      {!appState.loading && (\r\n        <div className={`${appState.display} user-info`}>\r\n          <p>Logged in user:</p>\r\n          <h4>{appState.isLoggedIn && appState.user.username}</h4>\r\n          <button onClick={handleLogout}>Log Out</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default authentication;"]},"metadata":{},"sourceType":"module"}