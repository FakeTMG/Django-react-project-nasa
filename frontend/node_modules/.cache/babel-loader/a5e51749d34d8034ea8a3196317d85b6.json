{"ast":null,"code":"import axios from \"axios\";\nimport { FETCH_USERS_REQUEST, FETCH_USERS_SUCCESS, FETCH_USERS_FAILURE } from \"./userTypes\";\nexport const fetchUsers = () => {\n  return dispatch => {\n    dispatch(fetchUsersRequest());\n    axios.get(\"http://127.0.0.1:8000/auth/user/\", localStorage.getItem('access')).then(response => {\n      const users = response.data.username;\n      dispatch(fetchUsersSuccess(users));\n    }).catch(error => {\n      dispatch(fetchUsersFailure(error.message));\n      axios.post(\"http://127.0.0.1:8000/auth/refresh/\", localStorage.getItem(\"refresh\")).then(response => {\n        localStorage.setItem('access', response.data.access);\n        axios.get(\"http://127.0.0.1:8000/auth/user/\", localStorage.getItem(\"access\")).then(response => {\n          // response.data is the users\n          const users = response.data.username;\n          dispatch(fetchUsersSuccess(users));\n        }).catch(error => {\n          dispatch(fetchUsersFailure(error.message));\n        });\n      }).catch(error => {\n        dispatch(fetchUsersFailure(error.message));\n      });\n    });\n  };\n};\nexport const fetchUsersRequest = () => {\n  return {\n    type: FETCH_USERS_REQUEST\n  };\n};\nexport const fetchUsersSuccess = users => {\n  return {\n    type: FETCH_USERS_SUCCESS,\n    payload: users\n  };\n};\nexport const fetchUsersFailure = error => {\n  return {\n    type: FETCH_USERS_FAILURE,\n    payload: error\n  };\n};","map":{"version":3,"sources":["C:/Users/Mega-PC/Desktop/develop/back end/django/my-project/frontend/src/redux/user/userActions.js"],"names":["axios","FETCH_USERS_REQUEST","FETCH_USERS_SUCCESS","FETCH_USERS_FAILURE","fetchUsers","dispatch","fetchUsersRequest","get","localStorage","getItem","then","response","users","data","username","fetchUsersSuccess","catch","error","fetchUsersFailure","message","post","setItem","access","type","payload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SACEC,mBADF,EAEEC,mBAFF,EAGEC,mBAHF,QAIO,aAJP;AAMA,OAAO,MAAMC,UAAU,GAAG,MAAM;AAC9B,SAAQC,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACC,iBAAiB,EAAlB,CAAR;AACAN,IAAAA,KAAK,CACFO,GADH,CACO,kCADP,EAC2CC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAD3C,EAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,YAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,QAA5B;AACAT,MAAAA,QAAQ,CAACU,iBAAiB,CAACH,KAAD,CAAlB,CAAR;AACD,KALH,EAMGI,KANH,CAMUC,KAAD,IAAW;AAChBZ,MAAAA,QAAQ,CAACa,iBAAiB,CAACD,KAAK,CAACE,OAAP,CAAlB,CAAR;AACAnB,MAAAA,KAAK,CACFoB,IADH,CAEI,qCAFJ,EAGIZ,YAAY,CAACC,OAAb,CAAqB,SAArB,CAHJ,EAKGC,IALH,CAKSC,QAAD,IAAc;AAClBH,QAAAA,YAAY,CAACa,OAAb,CAAqB,QAArB,EAA+BV,QAAQ,CAACE,IAAT,CAAcS,MAA7C;AACAtB,QAAAA,KAAK,CACFO,GADH,CAEI,kCAFJ,EAGIC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAHJ,EAKGC,IALH,CAKSC,QAAD,IAAc;AAClB;AACA,gBAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,QAA5B;AACAT,UAAAA,QAAQ,CAACU,iBAAiB,CAACH,KAAD,CAAlB,CAAR;AACD,SATH,EAUGI,KAVH,CAUUC,KAAD,IAAW;AAChBZ,UAAAA,QAAQ,CAACa,iBAAiB,CAACD,KAAK,CAACE,OAAP,CAAlB,CAAR;AACD,SAZH;AAaD,OApBH,EAqBGH,KArBH,CAqBUC,KAAD,IAAW;AAChBZ,QAAAA,QAAQ,CAACa,iBAAiB,CAACD,KAAK,CAACE,OAAP,CAAlB,CAAR;AACD,OAvBH;AAwBD,KAhCH;AAiCD,GAnCD;AAoCD,CArCM;AAuCP,OAAO,MAAMb,iBAAiB,GAAG,MAAM;AACrC,SAAO;AACLiB,IAAAA,IAAI,EAAEtB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMc,iBAAiB,GAAIH,KAAD,IAAW;AAC1C,SAAO;AACLW,IAAAA,IAAI,EAAErB,mBADD;AAELsB,IAAAA,OAAO,EAAEZ;AAFJ,GAAP;AAID,CALM;AAOP,OAAO,MAAMM,iBAAiB,GAAID,KAAD,IAAW;AAC1C,SAAO;AACLM,IAAAA,IAAI,EAAEpB,mBADD;AAELqB,IAAAA,OAAO,EAAEP;AAFJ,GAAP;AAID,CALM","sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  FETCH_USERS_REQUEST,\r\n  FETCH_USERS_SUCCESS,\r\n  FETCH_USERS_FAILURE,\r\n} from \"./userTypes\";\r\n\r\nexport const fetchUsers = () => {\r\n  return (dispatch) => {\r\n    dispatch(fetchUsersRequest());\r\n    axios\r\n      .get(\"http://127.0.0.1:8000/auth/user/\", localStorage.getItem('access'))\r\n      .then((response) => {\r\n        const users = response.data.username;\r\n        dispatch(fetchUsersSuccess(users));\r\n      })\r\n      .catch((error) => {\r\n        dispatch(fetchUsersFailure(error.message));\r\n        axios\r\n          .post(\r\n            \"http://127.0.0.1:8000/auth/refresh/\",\r\n            localStorage.getItem(\"refresh\")\r\n          )\r\n          .then((response) => {\r\n            localStorage.setItem('access', response.data.access )\r\n            axios\r\n              .get(\r\n                \"http://127.0.0.1:8000/auth/user/\",\r\n                localStorage.getItem(\"access\")\r\n              )\r\n              .then((response) => {\r\n                // response.data is the users\r\n                const users = response.data.username;\r\n                dispatch(fetchUsersSuccess(users));\r\n              })\r\n              .catch((error) => {\r\n                dispatch(fetchUsersFailure(error.message));\r\n              });\r\n          })\r\n          .catch((error) => {\r\n            dispatch(fetchUsersFailure(error.message));\r\n          });\r\n      });\r\n  };\r\n};\r\n\r\nexport const fetchUsersRequest = () => {\r\n  return {\r\n    type: FETCH_USERS_REQUEST,\r\n  };\r\n};\r\n\r\nexport const fetchUsersSuccess = (users) => {\r\n  return {\r\n    type: FETCH_USERS_SUCCESS,\r\n    payload: users,\r\n  };\r\n};\r\n\r\nexport const fetchUsersFailure = (error) => {\r\n  return {\r\n    type: FETCH_USERS_FAILURE,\r\n    payload: error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}